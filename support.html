<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/swiper.min.css" />
  <link rel="stylesheet" href="css/style.min.css">


  <title>Образовательная карта - О проекте</title>
</head>

<body>
  <div class="templates">


    <div id="wrap" class="wrap"></div>
  </div>



  <div class="modal modal-support ">
    <div class="modal-bg"></div>

    <div class="modal-block modal-support-block">
      <div class="modal-close">
        <img src="img/icons/close-icon.svg" alt="">
      </div>

      <span class="modal-support__text">
        Недопустимый файл
      </span>
    </div>
  </div>


  <header class="header">
    <div class="wrap">
      <a href="index.html" class="header-logo">
        <img src="img/logo.svg" alt="">
        <img src="img/logo-mb.svg" alt="" class="mb">
      </a>
      <div class="header-nav">
        <div class="header-row">
          <div class="burger js-burger mb">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <a href="order.html" class="btn">Заказать карту</a>
          <a href="insurance.html" class="btn-light">Страхование</a>

          <a href="faq.html" class="header-nav__help">
            <img src="img/icons/faq-icon.svg" alt="">
            <span>Помощь</span>
          </a>

          <div class="header-nav__actions">
            <a href="#">
              Пополнить Обркарту
            </a>
            <a href="#">
              Пополнить Транспортную карту
            </a>
          </div>

          <div class="header-nav__login">
            <!-- Если сюда будет вставляться фотография пользователя, то к картинке добавить класс avatar -->
            <img src="img/icons/login-icon.svg" alt="">
            <span>Войти</span>
          </div>
        </div>

        <div class="header-row">
          <div class="burger js-burger">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="header-nav__actions mb">
            <a href="#">
              Пополнить Обркарту
            </a>
            <a href="#">
              Пополнить Транспортную карту
            </a>
          </div>

          <div class="header-nav__login mb">
            <!-- Если сюда будет вставляться фотография пользователя, то к картинке добавить класс avatar -->
            <img src="img/icons/login-icon.svg" alt="">
            <span>Войти</span>
          </div>
          <nav class="header-nav__list">
            <ul>
              <li><a href="about.html">О проекте</a></li>
              <li><a href="payment.html">Способы пополнения</a></li>
              <li><a href="https://obrkarta.ru/mobile/">Мобильное приложение</a></li>
              <li><a href="coop.html">Сотрудничество</a></li>
              <li><a href="addSchool.html">Подключить школу</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </header>
  <div class="menu" id="menu">
    <div class="wrap menu-btns">
      <a href="order.html" class="btn">Заказать карту</a>
      <a href="insurance.html" class="btn-light">Страхование</a>
    </div>
    <nav class="menu-nav">
      <ul>
        <li class="mb">
          <div class="wrap">
            <a href="about.html">Пополнить Обркарту</a>
          </div>
        </li>
        <li class="mb">
          <div class="wrap">
            <a href="about.html">Пополнить Транспортную карту</a>
          </div>
        </li>
        <li>
          <div class="wrap">
            <a href="about.html">О проекте</a>
          </div>
        </li>
        <li>
          <div class="wrap">

            <a href="payment.html">Способы пополнения</a>
          </div>

        </li>
        <li>
          <div class="wrap">
            <a href="https://obrkarta.ru/mobile/">Мобильное приложение</a>
          </div>

        </li>
        <li>
          <div class="wrap">
            <a href="coop.html">Сотрудничество</a>
          </div>

        </li>
        <li>
          <div class="wrap">
            <a href="addSchool.html">Подключить школу</a>
          </div>

        </li>
      </ul>
    </nav>
  </div>

  <main class="main ">


    <section class="section support mb-1">
      <div class="wrap">
        <h2 class="section-title mt-1 mb-1 h1">Техническая поддержка </h2>


        <form action="#" class="support-form" id="supportForm">
          <p class="support-form__text">
            Если вы&nbsp;столкнулись с&nbsp;проблемой при работе с&nbsp;сайтом&nbsp;&mdash; оставьте нам сообщение.
            К&nbsp;сообщению вы&nbsp;можете
            прикрепить файлы. Ответ придет на&nbsp;вашу электронную почту
          </p>
          <div class="input-block js-hint">
            <input type="text" class="" autocomplete="off" name="title" maxlength="100">
            <div class="hint">
              Тема сообщения*
            </div>
          </div>
          <div class="textarea-block js-hint">
            <textarea name="message" class="" id="" autocomplete="off" minlength="10" maxlength="2000"></textarea>
            <div class="hint">
              Текст сообщения*
            </div>
          </div>

          <div class="input-block js-hint">
            <input type="text" class="" autocomplete="off" name="link" minlength="2" maxlength="80">
            <div class="hint">
              Ссылка на страницу с ошибкой
            </div>
          </div>

          <div class="input-block js-hint">
            <input type="email" class="" autocomplete="off" name="supportmail" minlength="2" maxlength="80">
            <div class="hint">
              E-mail*
            </div>
          </div>
          <div class="input-block js-hint">
     
              <input type="tel" class="phone js-tel" autocomplete="off" name="supporttel" minlength="18" maxlength="18">
                

            <div class="hint">
              Контактный телефон
            </div>
          </div>

          <!-- 
            скрипт для этого блока внизу страницы - если нужно можено перенести в отдельный файл js 
            желательная отправка через js (ajax), все файлы лежат в Files- 
          -->
          <div class="file-block">
            <span class="file-block__hint">Файл:</span>
            <input type="file" name="files[]" id="supportFiles" class="file-block__input"
              accept=".jpg, .jpeg, .png, .heic, .heif, .doc, .docx, .xls, .xlsx, .txt, .pdf, .avi, .mp4" multiple>
            <!-- список вставляется автоматически. Максимальная длинна имени, котора отображается - 30 символов -->
            <div class="file-block__list">
            </div>
            <label class="file-block__label btn-light" for="supportFiles">
              <span class="upload-file__text">Выберите файл</span>
            </label>


          </div>

          <input type="submit" value="Отправить" class="btn support-submit form-submit disabled">
          <span class="support-privacy">
            Нажимая на кнопку “Отправить”, вы даете согласие на обработку персональных данных
          </span>
        </form>
      </div>
    </section>

  </main>

  <footer>
    <section class="download">
      <div class="wrap">
        <h2 class="download-title">Скачайте приложение <span class="br"></span> прямо сейчас</h2>
        <div class="download-btns">
          <a href="https://apps.apple.com/ru/app/%D0%BE%D0%B1%D1%80%D0%BA%D0%B0%D1%80%D1%82%D0%B0-2-0/id1527869810"
            class="download-btns__item " target="_blank">
            <img src="img/pages/about/app/appStore-icon.svg" alt="Скачать в Apple Store">
          </a>
          <a href="https://play.google.com/store/apps/details?id=ru.obrkarta.apps.android.obrkarta&hl=ru&gl=US"
            class="download-btns__item" target="_blank">
            <img src="img/pages/about/app/googlePlay-icon.svg" alt="Скачать в Google Play">
          </a>
          <a href="https://appgallery.huawei.com/#/app/C104090547" class="download-btns__item" target="_blank">
            <img src="img/pages/about/app/appGallery-icon.svg" alt="Скачать в App Gallery">
          </a>
        </div>
        <div class="download-img">
          <img src="img/footer/footer-download-img.png" alt="">
          <img src="img/footer/footer-download-img_mb.png" alt="" class="mb">
        </div>
      </div>
    </section>
    <section class="footer">
      <div class="wrap">
        <div class="footer-block">
          <div class="footer-logos">
            <a href="index.html">
              <img src="img/footer/logo.svg" alt="">
            </a>
            <a href="https://www.akbars.ru/ " target="_blank" rel="noopener noreferrer">
              <img src="img/footer/bank-logo.svg" alt="">
            </a>

          </div>
          <div class="footer-copyright">
            © 2014-2021 <span class="br"></span> «Образовательная карта»
          </div>
        </div>
        <div class="footer-block">
          <div class="footer-nav">
            <a href="faq.html" class="footer-nav__item">Помощь</a>
            <a href="docs.html" class="footer-nav__item">Документы</a>
            <a href="contacts.html" class="footer-nav__item">Контакты</a>
          </div>
        </div>
        <div class="footer-block">
          <div class="footer-nav">
            <a href="about.html" class="footer-nav__item">О проекте</a>
            <a href="payment.html" class="footer-nav__item">Способы пополнения</a>
            <a href="coop.html" class="footer-nav__item">Сотрудничество</a>
            <a href="newsList.html" class="footer-nav__item">Новости</a>
          </div>
        </div>
        <div class="footer-block">
          <div class="footer-nav">
            <a href="support.html" class="footer-nav__item">Сообщить об ошибке на сайте</a>
            <a href="websiteAd.html" class="footer-nav__item">Реклама на сайте</a>
            <a href="privacy.html" class="footer-nav__item">Согласие на обработку <br> персональных данных</a>
          </div>
        </div>
        <div class="footer-block">
          <a href="tel:+7(843)561–05–05" class="phone">8 (843) 561–05–05</a>

          <div class="footer-block__social">
            <a href="https://vk.com/obrkarta" target="_blank">
              <img src="img/footer/vk-icon.svg" alt="">
            </a>
            <a href="https://www.instagram.com/obrkarta/" target="_blank">
              <img src="img/footer/inst-icon.svg" alt="">
            </a>
          </div>
        </div>
      </div>
    </section>
  </footer>


  <input type="hidden" name="" id="langSettings" value="RUSSIAN">

  
  <script type="module" src="js/lang.js"></script>
  <script src="js/swiper.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.validate.min.js"></script>
  <script src="js/jquery.mask.min.js"></script>
  <script src="js/droplist.js"></script>
  <script type="module" src="js/index.js"></script>

  <script>
    // загрузка файлов 
    const supportModal = document.querySelector('.modal-support')
    const err = supportModal.querySelector('.modal-support__text')
    const forms = document.querySelectorAll('form');
    const inputFiles = document.querySelectorAll('.file-block__input');


    function openErrorModal(msg) {
      err.innerHTML = msg
      supportModal.classList.add('active')
      document.querySelector('body').style.overflow = 'hidden'

    }
    function readableBytes(bytes) {
      var i = Math.floor(Math.log(bytes) / Math.log(1024)),
        sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
      return (bytes / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + sizes[i];
    }
    /////////// Кнопка «Прикрепить файл» /////////// 
    inputFiles.forEach(function (el) {
      let textSelector = el.parentElement.querySelector('.file-block__list');
      let fileList;

      let types = el.getAttribute('accept')
      console.log(types)
      // здесь все файлы 
      Files = [];

      // Событие выбора файла(ов) 
      el.addEventListener('change', function (e) {

        // создаём массив файлов
        // let files = e.target.files;
        for (let i = 0; i < el.files.length; i++) {

          if (Files.length < 10) {

            let file = el.files[i];

            // расширение 
            let format = file.type
            let type = format.slice(format.indexOf('/') + 1)
            if (types.indexOf(type) != -1) {
              console.log('файл разрешен')
            } else {
              openErrorModal("Некорректный формат файла. Вы можете добавить файл со следующими расширениями: <span> .jpg, .jpeg, .png, .heic, .heif, .doc, .docx, .xls, .xlsx, .txt, .pdf, .avi, .mp4 </span> ")
            }

            // размер файла
            if (file.size > 5 * 1024 * 1024) {
              // alert('Файл должен быть не более 5 МБ.');
              openErrorModal("Размер файла не должен превышать 5 MB. Был выбран файл <span>" + file.name + "</span> размером " + readableBytes(file.size))
              return;

            }

            if (file) {


              let addedFile = document.createElement('div');
              let addedFileName = document.createElement('span');
              let addedFileImg = document.createElement('div');

              addedFile.classList.add('item')
              addedFile.id = Files.length
              addedFileName.classList.add('item-name')

              addedFileImg.classList.add('item-img')
              addedFileImg.setAttribute('data-id', Files.length)
              addedFileImg.innerHTML = '<img src="img/icons/fileDelete-icon.svg" alt="">'

              addedFileImg.addEventListener('click', function (e) {
                let id = $(this).data('id');
                $(this).parent().remove();
                Files.splice(id, 1);
                // updateLabel();

                if (Files.length < 10) {
                  el.parentElement.querySelector('.file-block__label').style.display = 'block'
                }
              })
              let name = file.name
              let maxlength = 30
              if (name.length > maxlength)
                name = name.substr(0, maxlength - 3) + '...'

              addedFileName.textContent = name
              addedFile.append(addedFileName)
              addedFile.append(addedFileImg)


              textSelector.append(addedFile);

            }



            Files.push(el.files[i]);

          }else {
            openErrorModal("Вы можете добавить максимум 10 файлов ")

          }
          if (Files.length >= 10) {
            el.parentElement.querySelector('.file-block__label').style.display = 'none'

          } else {
            el.parentElement.querySelector('.file-block__label').style.display = 'block'

          }

        }

      });


    });
  </script>
</body>

</html>